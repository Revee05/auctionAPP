# ==========================================
# WORKER MICROSERVICE CONFIGURATION
# ==========================================
NODE_ENV=development
WORKER_NAME=media-processor-01

# Redis Queue Configuration
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_TLS=false

# Queue Settings
IMAGE_QUEUE_NAME=media-image
VIDEO_QUEUE_NAME=media-video
IMAGE_CONCURRENCY=4
VIDEO_CONCURRENCY=2
JOB_TIMEOUT_IMAGE=300000
JOB_TIMEOUT_VIDEO=1800000
MAX_JOB_ATTEMPTS=3

# Database (Write access for status updates)
DATABASE_URL=postgresql://postgres:246855@localhost:5432/auctionDB

# ==========================================
# STORAGE CONFIGURATION (WORKER-SPECIFIC)
# ==========================================
# Worker can use different provider/credentials than BE
WORKER_STORAGE_PROVIDER=local
WORKER_STORAGE_BUCKET_MAP=avatars=user-avatars-prod,auction-images=auction-media-prod,auction-videos=auction-video-prod,default=main

# AWS S3 (Worker has READ + WRITE + DELETE access)
WORKER_AWS_S3_REGION=ap-southeast-1
WORKER_AWS_ACCESS_KEY_ID=AKIA...
WORKER_AWS_SECRET_ACCESS_KEY=...

# Supabase (Alternative provider)
WORKER_SUPABASE_URL=https://xxx.supabase.co
WORKER_SUPABASE_KEY=service_role_key
WORKER_SUPABASE_BUCKET=worker-processed

# GCP (Alternative provider)  
WORKER_GCP_BUCKET_NAME=worker-media-bucket
WORKER_GCP_KEYFILE_PATH=/secrets/gcp-worker-sa.json

# Cloudinary (Alternative provider)
WORKER_CLOUDINARY_CLOUD_NAME=your-cloud-name
WORKER_CLOUDINARY_API_KEY=your-api-key
WORKER_CLOUDINARY_API_SECRET=your-api-secret

# Local (Development)
WORKER_STORAGE_LOCAL_PATH=public/uploads
WORKER_STORAGE_PUBLIC_BASE_URL=http://localhost:3500

# ==========================================
# PROCESSING CONFIGURATION
# ==========================================
TEMP_DIR=/tmp/media-processing
MAX_IMAGE_DIMENSION=4096
MAX_VIDEO_DURATION=600
MAX_VIDEO_BITRATE=10000000

# Image Processing (Sharp)
IMAGE_QUALITY=85
IMAGE_FORMATS=webp,jpeg
THUMBNAIL_SIZE=256
SMALL_SIZE=512
MEDIUM_SIZE=1024
LARGE_SIZE=2048

# Video Processing (FFmpeg)
FFMPEG_PATH=/usr/bin/ffmpeg
FFPROBE_PATH=/usr/bin/ffprobe
FFMPEG_THREADS=4
VIDEO_CODEC=libx264
VIDEO_PRESET=medium
VIDEO_CRF=23
AUDIO_CODEC=aac
AUDIO_BITRATE=128k

# Video Variants (Resolutions)
VIDEO_VARIANTS=360p,720p,1080p
VIDEO_360P_BITRATE=800k
VIDEO_720P_BITRATE=2500k
VIDEO_1080P_BITRATE=5000k

# Thumbnail Generation
VIDEO_THUMBNAIL_TIME=0.1
VIDEO_THUMBNAIL_FORMAT=webp
VIDEO_GIF_DURATION=3

# ==========================================
# MONITORING & LOGGING
# ==========================================
LOG_LEVEL=info
METRICS_PORT=9090
SENTRY_DSN=

# Security
ENABLE_MALWARE_SCAN=false
CLAMAV_HOST=localhost
CLAMAV_PORT=3310
